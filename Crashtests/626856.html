<html>
<head>
    <title>WebGL shader testcase</title>
    <script type="text/javascript">
        var vs ='attribute vec3 pos;\n\n\
        void main(void) {\n\
        gl_Position = vec4(pos, 2);\n\
        }';
        var fs = '// Shader Type: Fragment\n\
                 #ifndef GL_APPLE_client_storage\n\
                 #ifndef GL_APPLE_client_storage\n\
                 #ifdef GL_APPLE_client_storage\n\
                 #ifdef GL_APPLE_client_storage\n\
                 #if GL_ARB_texture_non_power_of_two\n\
                 #define GL_FRAGMENT_PRECISION_HIGH 1\n\n\
                 #else #extension all : disable\n\n\
                 #endif\n\n\
                 #else #ifndef GL_ARB_texture_rectangle\n\
                 #if GL_EXT_bgra\n\
                 #ifndef GL_ARB_framebuffer_object\n\
                 #if GL_ARB_framebuffer_object\n\
                 #ifndef GL_EXT_framebuffer_object\n\
                 #version 0,\n\n\
                 #else #version 0\n\n\
                 #endif\n\n\
                 #else #defined (v2)\n\n\
                 #endif\n\n\
                 #else #if GL_ARB_texture_rectangle\n\
                 #ifdef GL_ARB_texture_rectangle\n\
                 #ifdef GL_EXT_framebuffer_object\n\
                 #ifdef GL_ARB_framebuffer_object\n\
                 #extension all : warn\n\n\
                 #else #define GL_FRAGMENT_PRECISION_HIGH 1\n\n\
                 #endif\n\n\
                 #else #pragma optimize (on)\n\n\
                 #endif\n\n\
                 #else #version 0\n\n\
                 #endif\n\n\
                 #else #ifdef GL_EXT_bgra\n\
                 #ifndef GL_EXT_framebuffer_object\n\
                 #ifndef GL_ARB_framebuffer_object\n\
                 #error \n\n\
                 #else #error \n\n\
                 #endif\n\n\
                 #else #define v3\n\n\
                 #endif\n\n\
                 #else #defined (v4)\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #else #ifdef GL_EXT_bgra\n\
                 #version 0.0\n\n\
                 #else #if GL_ARB_texture_non_power_of_two\n\
                 #define GL_FRAGMENT_PRECISION_HIGH 1\n\n\
                 #else #define v5\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #else #if GL_ARB_texture_rectangle\n\
                 #define v6\n\n\
                 #else #ifndef GL_EXT_framebuffer_object\n\
                 #pragma STDGL\n\n\
                 #else #version 110\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #else #if GL_EXT_bgra\n\
                 #pragma debug (on)\n\n\
                 #else #ifdef GL_ARB_texture_rectangle\n\
                 #pragma STDGL\n\n\
                 #else #ifdef GL_ARB_texture_rectangle\n\
                 #defined (v7)\n\n\
                 #else #ifndef GL_APPLE_client_storage\n\
                 #defined (v8)\n\n\
                 #else #ifndef GL_APPLE_client_storage\n\
                 #ifndef GL_ARB_texture_non_power_of_two\n\
                 #pragma STDGL invariant(all)\n\n\
                 #else #if \n\n\
                 #endif\n\n\
                 #else #ifndef GL_ARB_texture_non_power_of_two\n\
                 #define v9\n\n\
                 #else #pragma debug (on)\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #endif\n\n\
                 #else #define GL_FRAGMENT_PRECISION_HIGH 1\n\n\
                 #endif\n\n\
                 #else #extension all : warn\n\n\
                 #endif\n\
                 int v0;\n\
                 vec4 v1;\n\
                 void main() {  }\n';

        function initWebGL(id, vshader, fshader) {
            var gl = document.getElementById(id).getContext("experimental-webgl");
            var program = gl.createProgram();
            var add = function(type, source) {
                    var shader = gl.createShader(type);
                    gl.shaderSource(shader, source);
                    gl.compileShader(shader);
                    gl.attachShader(program, shader);
            };
            add(gl.VERTEX_SHADER, vshader);
            add(gl.FRAGMENT_SHADER, fshader);
            gl.linkProgram(program);
            gl.useProgram(program);
            return { gl: gl, program: program };
        }
        function boom() {
            initWebGL("canvas", vs, fs);
        }
    </script>
</head>
<body onload="boom()">
    <canvas id="canvas"></canvas>
</body>
</html>